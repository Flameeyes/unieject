unieject: Universal Eject command
---------------------------------

This package consists of a library and a command line tool which uses that lib.

libunieject is a library which allows the linked software to perform
automatical ejects and unmounting the filesystems for the device you want to
eject.
At the time of writing (pre-1 release), this is still not API-stable nor well
documented, but this is going to improve in next versions.

The command line tool instead is a mimic of classic eject command for Linux
( http://eject.sourceforge.net/ ), which supports also the features of
FreeBSD's eject command ( http://www.freshports.org/sysutils/eject/ ).

It hasn't a complete syntax compatibility with either Linux's or FreeBSD's
ejects as they have conflicts between them, but the main options are the
same.

It can fully replace FreeBSD's eject (in both atapi and atapicam mode), and
already mime the main options of Linux's eject.

To be compiled and executed it requires libcdio (tested with 0.74 and above)
and libpopt. It also requires txt2man ( http://mvertes.free.fr/ ) to compile
the manpages.
The config file parsing is done using libconfuse
( http://www.nongnu.org/confuse/ ).
For FreeBSD support you'll also need an extra patch for libcdio-0.75 to be
able to manage ATAPI cdroms (/dev/acd*).

Unieject will build with GCC3+ and ICC9, as they support for sure function's
attributes, as it makes use of __attribute__((constructor)) to initialize
and __attribute__((destructor)) to destroy the data.


Dependencies
------------

libcdio (version 0.74 or above) http://www.gnu.org/software/libcdio/
  The base library that provides access to CD-Rom drives. Mandatory.

txt2man http://mvertes.free.fr/
  It's required to build the man pages that describes the behavior of the
  command and the configuration file. Mandatory.

libpopt
  Used for command line parameters and arguments parsing. Mandatory.

libconfuse (2.5) http://www.nongnu.org/confuse/
  Used for configuration file parsing. Mandatory.

Subversion
  Required to get an updated ChangeLog built during make dist phase.
  Optional when building out of the source tarball.

libxslt
  xsltproc command is used to use svn2cl script, it's only needed during
  make dist phase, so no need for it when building out of the source
  tarball.


Note to packagers
-----------------
Being a package maintainer myself, I think it's good to leave a few notes to
who wants to package unieject.

Unieject is though as a drop-in replacement for 'eject' command, but still it
doesn't just "go in" as is, because programs just know about 'eject' command.
If you wanto to make unieject provide the eject facilities to other programs
you need to create an eject symlink to unieject so that eject command is
executed by unieject.
Please also note that to be able to umount correctly the partitions you must
be root, or use a suid wrapper. You can also set capabilities bits to eject
command, but that's still not supported. The use of a suid umount wrapper like
pumount is supported by the configuration file.

The sample configuration file is not installed by default, this allow to define
the right unieject defaults on a per-distribution basis.

API documentation is not being built at the moment; when it will be, it will be
specified and will have a --enable/--disable switch on ./configure.

Man pages are not generated during release creation just to make easier my work
sorry about this, but txt2man is just a bash script so that shouldn't be too
much of a problem.

This package is supposed to build fine with -Werror, -Wall, -Wextra and 
-pedantic CFLAGS, or at least it does so on my system. Unfortuantely, it's
./configure to fail when checking for strdup if -Werror is defined, I don't
really know why. Also --as-needed LDFLAG is supposed to work.

